import{A as O,B as g,D as s,E as _,F as x,G as P,H as K,I as L,J as z,L as Q,M as W,N as X,O as C,P as Z,Q as ee,R as te,S as ie,U as ne,V as re,W as oe,X as ae,a as N,b as $,c as M,d as H,e as V,f as U,g as B,h as G,i as J,j as Y,l as E,m as A,n as k,o as m,p as D,q as v,r as q,s as u,t as c,u as n,v as r,w as d,z as T}from"./chunk-OVTEEO3T.js";var S=class t{transform(i,e=200,o="\u2026"){let p=(i??"").toString();if(e<=0||p.length<=e)return p;let a=p.slice(0,e),b=Math.max(a.lastIndexOf("."),a.lastIndexOf("!"),a.lastIndexOf("?"));if(b!==-1)a=a.slice(0,b+1);else{let l=a.lastIndexOf(" ");l>0&&(a=a.slice(0,l))}return a=a.trim(),a.length<p.length?a+o:a}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=q({name:"truncateSentences",type:t,pure:!0})};var f={production:!0,envFile:"environment.production.ts",apiBaseUrl:"https://rcdata.org/api",ffaradID:2535275};var R=class t{constructor(i){this.http=i}apiUrl=`${f.apiBaseUrl}/portal/search-result`;fetchPage(i,e=30){console.log("Fetching page",i);let o={resulttype:"research",format:"json",limit:String(e),portal:`${f.ffaradID}`,page:String(i)},p=new ee({Accept:"application/json","Content-Type":"application/json"});return this.http.get(this.apiUrl,{params:o,headers:p})}getAllResearchItems(i=30,e=10){return this.fetchPage(0,i).pipe(B((o,p)=>{let a=p+1;return o.length===i&&a<e?this.fetchPage(a,i):M}),H(o=>o.length>0),U((o,p)=>o.concat(p),[]),G(o=>console.log("API Response:",o)),V(o=>{throw console.error("Failed to load research items:",o),o}))}static \u0275fac=function(e){return new(e||t)(Y(te))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})};var ce=t=>({"font-size.px":t});function de(t,i){if(t&1&&(n(0,"span",11),s(1),r()),t&2){let e=i.$implicit;c("ngStyle",K(2,ce,e.size)),m(),x(" ",e.key," ")}}function ue(t,i){if(t&1&&d(0,"img",19),t&2){let e=g().$implicit;c("src",e.thumb,k)("alt",e.title)}}function fe(t,i){if(t&1&&(n(0,"span"),s(1),r()),t&2){let e=i.$implicit,o=i.last;m(),P(" ",e.name,"",o?"":", "," ")}}function he(t,i){if(t&1&&(n(0,"p",20),u(1,fe,2,2,"span",21),r()),t&2){let e=g().$implicit;m(),c("ngForOf",e.published_in)}}function ge(t,i){if(t&1){let e=T();n(0,"div",12),O("click",function(){let p=E(e).$implicit,a=g();return A(a.goToArticleDetail(p))}),u(1,ue,1,2,"img",13),n(2,"div",14)(3,"h3")(4,"span",15),s(5),r(),d(6,"br"),n(7,"span",16),s(8),r()(),u(9,he,2,1,"p",17),n(10,"p",18),s(11),L(12,"truncateSentences"),r()()()}if(t&2){let e=i.$implicit;m(),c("ngIf",e.thumb),m(4),_(e.author.name),m(3),_(e.title),m(),c("ngIf",e.published_in==null?null:e.published_in.length),m(2),x(" ",z(12,5,e.abstract,500," [\u2026]")," ")}}function ve(t,i){if(t&1&&d(0,"img",19),t&2){let e=g().$implicit;c("src",e.thumb,k)("alt",e.title)}}function _e(t,i){if(t&1&&(n(0,"span"),s(1),r()),t&2){let e=i.$implicit,o=i.last;m(),P(" ",e.name,"",o?"":", "," ")}}function be(t,i){if(t&1&&(n(0,"p",20),u(1,_e,2,2,"span",21),r()),t&2){let e=g().$implicit;m(),c("ngForOf",e.published_in)}}function xe(t,i){if(t&1){let e=T();n(0,"div",12),O("click",function(){let p=E(e).$implicit,a=g();return A(a.goToArticleDetail(p))}),u(1,ve,1,2,"img",13),n(2,"div",14)(3,"h3")(4,"span",15),s(5),r(),d(6,"br"),n(7,"span",16),s(8),r()(),u(9,be,2,1,"p",17),n(10,"p",18),s(11),L(12,"truncateSentences"),r()()()}if(t&2){let e=i.$implicit;m(),c("ngIf",e.thumb),m(4),_(e.author.name),m(3),_(e.title),m(),c("ngIf",e.published_in==null?null:e.published_in.length),m(2),x(" ",z(12,5,e.abstract,500," [\u2026]")," ")}}var y=class t{constructor(i,e){this.researchService=i;this.router=e}itemsRC=[];itemsFFARD=[];keywordEntries=[];ngOnInit(){this.researchService.getAllResearchItems().subscribe({next:i=>{this.itemsFFARD=i.filter(l=>l.published_in?.some(h=>h.id===f.ffaradID)),this.itemsRC=i.filter(l=>!l.published_in?.some(h=>h.id===f.ffaradID));let e=i.reduce((l,h)=>(h.keywords?.forEach(j=>l[j]=(l[j]||0)+1),l),{}),o=Object.entries(e).map(([l,h])=>({key:l,count:h})),p=o.map(l=>l.count);if(p.length===0){this.keywordEntries=[];return}let a=Math.min(...p),b=Math.max(...p);this.keywordEntries=o.map(l=>$(N({},l),{size:this.scale(l.count,a,b,16,28)}))},error:i=>{console.error("Error fetching research items:",i)}})}openInNewTab(i){window.open(i,"_blank","noopener")}goToArticleDetail(i){this.router.navigate(["/id",i.id],{state:{item:i}})}scale(i,e,o,p,a){return o===e?(p+a)/2:p+(i-e)*(a-p)/(o-e)}static \u0275fac=function(e){return new(e||t)(D(R),D(re))};static \u0275cmp=v({type:t,selectors:[["app-research-list"]],decls:23,vars:3,consts:[[1,"app-research-list"],[1,"keywords"],["class","keyword",3,"ngStyle",4,"ngFor","ngForOf"],[1,"rc-expositions"],[1,"section-title"],[1,"research-list"],["class","research-item",3,"click",4,"ngFor","ngForOf"],[1,"ffa-expositions"],[1,"subtitle"],[1,"projects-current"],[1,"projects-previous"],[1,"keyword",3,"ngStyle"],[1,"research-item",3,"click"],["class","thumbnail",3,"src","alt",4,"ngIf"],[1,"details"],[1,"author"],[1,"article-title"],["class","where",4,"ngIf"],[1,"abstract"],[1,"thumbnail",3,"src","alt"],[1,"where"],[4,"ngFor","ngForOf"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1),u(2,de,2,4,"span",2),r(),n(3,"div",3)(4,"div",4)(5,"h2"),s(6,"Published in RC Journals"),r()(),n(7,"div",5),u(8,ge,13,9,"div",6),r()(),n(9,"div",7)(10,"div",4)(11,"h2"),s(12,"FFA Research in Art and Design"),r(),n(13,"div",8),s(14,"ISSN: 1234-5678"),r()(),n(15,"div",5),u(16,xe,13,9,"div",6),r()(),n(17,"div",9)(18,"h2"),s(19,"Projects Current"),r()(),n(20,"div",10)(21,"h2"),s(22,"Projects Previous"),r()()()),e&2&&(m(2),c("ngForOf",o.keywordEntries),m(6),c("ngForOf",o.itemsRC),m(8),c("ngForOf",o.itemsFFARD))},dependencies:[C,Q,W,X,S,ae],encapsulation:2})};var F=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=v({type:t,selectors:[["app-home"]],decls:29,vars:0,consts:[["href","https://favu.vut.cz/en/","target","_blank"],["href","https://favu.vut.cz/en/publishing","target","_blank"],["href","https://galerie.favu.vut.cz","target","_blank"],["href","https://www.favu.vut.cz/en/international/degree-en","target","_blank"],["href","https://www.favu.vut.cz/en/phd","target","_blank"],["href","https://www.favu.vut.cz/en/post-mag-post-doc","target","_blank"],[1,"logos"],["src","FFA_black_white_EN.png","alt","FFA Logo"],["src","FFA_abbreviation_black_white_EN.png","alt","FFA Logo"],[1,"logos","small"],[1,"contact"],[1,"person"],["href","mailto:vesela@favu.vut.cz"]],template:function(e,o){e&1&&(n(0,"header")(1,"a",0),s(2,"FFA"),r(),n(3,"a",1),s(4,"FFA Publishing"),r(),n(5,"a",2),s(6,"FFA Gallery"),r(),n(7,"a",3),s(8,"FAAD"),r(),n(9,"a",4),s(10,"Doctorate"),r(),n(11,"a",5),s(12,"Postdoctoral Fellowships"),r()(),n(13,"div",6),d(14,"img",7)(15,"img",8),r(),d(16,"app-research-list"),n(17,"footer")(18,"div",9),d(19,"img",7)(20,"img",8),r(),n(21,"div",10)(22,"div",11)(23,"div"),s(24,"Contact: Lenka Vesel\xE1"),r(),n(25,"a",12),s(26,"vesela@favu.vut.cz"),r()(),n(27,"a",0),s(28,"www.favu.vut.cz"),r()()())},dependencies:[C,y],encapsulation:2})};var pe=[{path:"",pathMatch:"full",component:F},{path:"id/:articleId",loadComponent:()=>import("./chunk-O6U6KXYH.js").then(t=>t.ArticleDetailComponent),title:"Exposition Detail"},{path:"**",redirectTo:""}];var me={providers:[oe(pe),ie()]};console.log("Running with environment:",f);var w=class t{title="ffa-portal";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=v({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(e,o){e&1&&(n(0,"main"),d(1,"router-outlet"),r())},dependencies:[ne],encapsulation:2})};Z(w,me).catch(t=>console.error(t));
